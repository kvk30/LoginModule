<!DOCTYPE html>
<html lang ="en">
    <head>
        <meta charset = "UTF-8"/>
        <meta name="viewpoint" content ="width=device-width, intial-scale=1.0"/>
        <title>Change password</title>
    </head>
<body> 
    <h1>
        Change password
    </h1>
    <form id = "Reg-form">
      
      <input type = "password" id="password" placeholder="Password" />
      <input type = "submit" value = "Submit form" />
    </form>
    <script>
        const form = document.getElementById('Reg-form')
        form.addEventListener('submit', registerUser)
        async function registerUser(event)
        {
            event.preventDefault()
            
            const password = document.getElementById('password').value
            const result = await fetch('api/register', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json'
					},
					body: JSON.stringify({
						newpassword: password,
						token: localStorage.getItem('token')
					})
				}).then((res) => res.json())
            if(result.status === 'ok')
            {
                 alert('success')
                 
            }
            else
            {
                alert(result.error)
            }
            console.log(result)
        }
    </script>
</body>
</html>